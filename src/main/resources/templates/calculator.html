<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –ø–æ–∂–∞—Ä–æ–≤ –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–∏</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .calculator-container {
            max-width: 1400px;
            margin: 20px auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        .section-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .input-group-sm {
            max-width: 200px;
        }
        .chart-container {
            height: 300px;
            margin: 20px 0;
        }
        .risk-critical { color: #dc3545; font-weight: bold; }
        .risk-high { color: #fd7e14; font-weight: bold; }
        .risk-medium { color: #ffc107; font-weight: bold; }
        .risk-low { color: #198754; font-weight: bold; }
        .risk-minimal { color: #6c757d; font-weight: bold; }
        .variable-table th {
            background-color: #e9ecef;
        }
    </style>
</head>
<body>
<div class="container-fluid">
    <div class="calculator-container">
        <h1 class="text-center mb-4">üî• –ú–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∂–∞—Ä–æ–≤ –Ω–∞ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–∏</h1>
        <p class="text-center text-muted mb-4">
            –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø–æ–∂–∞—Ä–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
        </p>

        <div class="row">
            <div class="col-md-8">
                <div class="section-card">
                    <h4>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–∏—Å—Ç–µ–º—ã</h4>

                    <form th:action="@{/simulate}" th:object="${fireModel}" method="post">
                        <div class="table-responsive">
                            <table class="table table-bordered variable-table">
                                <thead>
                                <tr>
                                    <th>–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è</th>
                                    <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                    <th>–ó–Ω–∞—á–µ–Ω–∏–µ</th>
                                    <th>–î–∏–∞–ø–∞–∑–æ–Ω</th>
                                </tr>
                                </thead>
                                <tbody>
                                <!-- X1-X15 –ø–æ–ª—è -->
                                <tr>
                                    <td>X1</td>
                                    <td>–ü–æ–∂–∞—Ä–æ–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x1}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X2</td>
                                    <td>–ù–∞–ª–∏—á–∏–µ –≥–æ—Ä—é—á–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (–∫–≥/–º¬≤)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x2}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-100</td>
                                </tr>
                                <tr>
                                    <td>X3</td>
                                    <td>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –≤–µ–Ω—Ç–∏–ª—è—Ü–∏–∏ (%)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x3}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-100</td>
                                </tr>
                                <tr>
                                    <td>X4</td>
                                    <td>–ö–∞—á–µ—Å—Ç–≤–æ —ç–ª–µ–∫—Ç—Ä–æ–æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x4}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X5</td>
                                    <td>–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ (¬∞C)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x5}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">20-100</td>
                                </tr>
                                <tr>
                                    <td>X6</td>
                                    <td>–í–ª–∞–∂–Ω–æ—Å—Ç—å –≤–æ–∑–¥—É—Ö–∞ (%)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x6}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-100</td>
                                </tr>
                                <tr>
                                    <td>X7</td>
                                    <td>–ö–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è –∫–∏—Å–ª–æ—Ä–æ–¥–∞ (%)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x7}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-25</td>
                                </tr>
                                <tr>
                                    <td>X8</td>
                                    <td>–°–∫–æ—Ä–æ—Å—Ç—å –≤–æ–∑–¥—É—à–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ (–º/—Å)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x8}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X9</td>
                                    <td>–£—Ä–æ–≤–µ–Ω—å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x9}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X10</td>
                                    <td>–ù–∞–ª–∏—á–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º –ø–æ–∂–∞—Ä–æ—Ç—É—à–µ–Ω–∏—è (%)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x10}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-100</td>
                                </tr>
                                <tr>
                                    <td>X11</td>
                                    <td>–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∂–∞—Ä–Ω—ã—Ö –≥–∏–¥—Ä–∞–Ω—Ç–æ–≤ (%)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x11}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-100</td>
                                </tr>
                                <tr>
                                    <td>X12</td>
                                    <td>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —ç–≤–∞–∫—É–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—É—Ç–µ–π</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x12}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X13</td>
                                    <td>–ö–∞—á–µ—Å—Ç–≤–æ –ø–æ–∂–∞—Ä–Ω–æ–π —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x13}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X14</td>
                                    <td>–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –≤–Ω–µ—à–Ω–∏—Ö –≤–æ–∑–º—É—â–µ–Ω–∏–π</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x14}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10</td>
                                </tr>
                                <tr>
                                    <td>X15</td>
                                    <td>–ü–ª–æ—â–∞–¥—å –ø–æ–º–µ—â–µ–Ω–∏—è (–º¬≤)</td>
                                    <td>
                                        <div class="input-group input-group-sm">
                                            <input type="number" step="0.1" class="form-control"
                                                   th:field="*{x15}" required>
                                        </div>
                                    </td>
                                    <td class="text-muted">0-10000</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="row mt-4">
                            <div class="col-md-6">
                                <h5>–í–Ω–µ—à–Ω–∏–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è (E1-E5)</h5>
                                <div class="mb-3">
                                    <label class="form-label">E1 - –¢–µ—Ö–Ω–æ–≥–µ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:</label>
                                    <input type="number" step="0.1" class="form-control"
                                           th:field="*{e1}" min="0" max="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">E2 - –ß–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π —Ñ–∞–∫—Ç–æ—Ä:</label>
                                    <input type="number" step="0.1" class="form-control"
                                           th:field="*{e2}" min="0" max="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">E3 - –ü—Ä–∏—Ä–æ–¥–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:</label>
                                    <input type="number" step="0.1" class="form-control"
                                           th:field="*{e3}" min="0" max="10">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label class="form-label">E4 - –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã:</label>
                                    <input type="number" step="0.1" class="form-control"
                                           th:field="*{e4}" min="0" max="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">E5 - –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:</label>
                                    <input type="number" step="0.1" class="form-control"
                                           th:field="*{e5}" min="0" max="10">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">–í—Ä–µ–º—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–º–∏–Ω):</label>
                                    <input type="number" class="form-control"
                                           th:field="*{simulationTime}" min="10" max="300">
                                </div>
                            </div>
                        </div>

                        <div class="text-center mt-4">
                            <button type="submit" class="btn btn-primary btn-lg">
                                –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="col-md-4">
                <div th:if="${result}" class="section-card">
                    <h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è</h4>

                    <div th:switch="${result.riskLevel}">
                        <div th:case="'–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô'" class="alert alert-danger">
                            <h5 class="alert-heading">–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô</h5>
                            <p class="mb-0">
                                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫:
                                <strong th:text="${#numbers.formatDecimal(result.maxFireRisk, 1, 3)}">0.500</strong>
                            </p>
                            <p th:if="${result.timeToCritical != null and result.timeToCritical > 0}" class="mb-0">
                                –í—Ä–µ–º—è –¥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:
                                <strong th:text="${result.timeToCritical}">30</strong> –º–∏–Ω
                            </p>
                        </div>
                        <div th:case="'–í–´–°–û–ö–ò–ô'" class="alert alert-warning">
                            <h5 class="alert-heading">–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: –í–´–°–û–ö–ò–ô</h5>
                            <p class="mb-0">
                                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫:
                                <strong th:text="${#numbers.formatDecimal(result.maxFireRisk, 1, 3)}">0.500</strong>
                            </p>
                            <p th:if="${result.timeToCritical != null and result.timeToCritical > 0}" class="mb-0">
                                –í—Ä–µ–º—è –¥–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:
                                <strong th:text="${result.timeToCritical}">30</strong> –º–∏–Ω
                            </p>
                        </div>
                        <div th:case="'–°–†–ï–î–ù–ò–ô'" class="alert alert-info">
                            <h5 class="alert-heading">–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: –°–†–ï–î–ù–ò–ô</h5>
                            <p class="mb-0">
                                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫:
                                <strong th:text="${#numbers.formatDecimal(result.maxFireRisk, 1, 3)}">0.500</strong>
                            </p>
                        </div>
                        <div th:case="'–ù–ò–ó–ö–ò–ô'" class="alert alert-success">
                            <h5 class="alert-heading">–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: –ù–ò–ó–ö–ò–ô</h5>
                            <p class="mb-0">
                                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫:
                                <strong th:text="${#numbers.formatDecimal(result.maxFireRisk, 1, 3)}">0.500</strong>
                            </p>
                        </div>
                        <div th:case="*" class="alert alert-secondary">
                            <h5 class="alert-heading">–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞: –ú–ò–ù–ò–ú–ê–õ–¨–ù–´–ô</h5>
                            <p class="mb-0">
                                –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫:
                                <strong th:text="${#numbers.formatDecimal(result.maxFireRisk, 1, 3)}">0.500</strong>
                            </p>
                        </div>
                    </div>

                    <div class="mt-3">
                        <h6>–ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:</h6>
                        <ul class="list-group">
                            <li class="list-group-item d-flex justify-content-between">
                                <span>–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∏—Å–∫:</span>
                                <strong th:text="${#numbers.formatDecimal(result.maxFireRisk, 1, 3)}">0</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>–£—Ä–æ–≤–µ–Ω—å –æ–ø–∞—Å–Ω–æ—Å—Ç–∏:</span>
                                <strong th:text="${result.riskLevel}">-</strong>
                            </li>
                            <li class="list-group-item d-flex justify-content-between">
                                <span>–í—Ä–µ–º—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è:</span>
                                <strong th:text="${result.timePoints != null ? #lists.size(result.timePoints) : 0}">60</strong> –º–∏–Ω
                            </li>
                        </ul>
                    </div>

                    <div class="mt-3" th:if="${result.recommendations != null and not #lists.isEmpty(result.recommendations)}">
                        <h6>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:</h6>
                        <ul class="list-group">
                            <li th:each="rec : ${result.recommendations}"
                                class="list-group-item list-group-item-warning">
                                <span th:text="${rec}"></span>
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="section-card mt-3">
                    <h5>–û –º–æ–¥–µ–ª–∏</h5>
                    <p class="small">
                        –ú–æ–¥–µ–ª—å –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º–µ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º–Ω–æ–π –¥–∏–Ω–∞–º–∏–∫–∏,
                        —É—á–∏—Ç—ã–≤–∞—é—â–µ–π 15 –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ 5 –≤–Ω–µ—à–Ω–∏—Ö –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–π.
                        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∞—Ç—Ä–∏—Ü–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –≤–∑–∞–∏–º–æ—Å–≤—è–∑–µ–π –º–µ–∂–¥—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
                    </p>
                </div>
            </div>
        </div>

        <!-- –°–∫—Ä—ã—Ç—ã–π div –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏–∫–æ–≤ -->
        <div th:if="${result}" style="display: none;">
            <!-- –î–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON -->
            <div id="chartData"
                 th:data-time-points="${#strings.replace(#strings.replace(#strings.replace(result.timePoints.toString(), '[', ''), ']', ''), ' ', '')}"
                 th:data-fire-risk="${#strings.replace(#strings.replace(#strings.replace(result.fireRiskLevels.toString(), '[', ''), ']', ''), ' ', '')}"
                 th:data-temperature="${#strings.replace(#strings.replace(#strings.replace(result.temperatureValues.toString(), '[', ''), ']', ''), ' ', '')}"
                 th:data-oxygen="${#strings.replace(#strings.replace(#strings.replace(result.oxygenConcentration.toString(), '[', ''), ']', ''), ' ', '')}">
            </div>
        </div>

        <div th:if="${result}" class="section-card">
            <h4>–ì—Ä–∞—Ñ–∏–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞</h4>

            <div class="row">
                <div class="col-md-6">
                    <div class="chart-container">
                        <canvas id="riskChart"></canvas>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="chart-container">
                        <canvas id="paramsChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // –ñ–¥–µ–º –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    window.addEventListener('load', function() {
        console.log('–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö...');

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
        const chartDataElement = document.getElementById('chartData');

        if (chartDataElement) {
            console.log('–ù–∞–π–¥–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤');
            createChartsFromData(chartDataElement);
        } else {
            console.log('–î–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –Ω–µ—Ç, –≤–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã');

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –≤–æ–æ–±—â–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            const hasResults = document.querySelector('.alert.alert-danger, .alert.alert-warning, .alert.alert-info, .alert.alert-success, .alert.alert-secondary');

            if (hasResults) {
                console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –µ—Å—Ç—å, –Ω–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω—ã. –°–æ–∑–¥–∞–µ–º –¥–µ–º–æ-–≥—Ä–∞—Ñ–∏–∫–∏.');
                createDemoCharts();
            }
        }
    });

    function createChartsFromData(chartDataElement) {
        try {
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–æ–≤
            const timePointsStr = chartDataElement.getAttribute('data-time-points');
            const fireRiskStr = chartDataElement.getAttribute('data-fire-risk');
            const temperatureStr = chartDataElement.getAttribute('data-temperature');
            const oxygenStr = chartDataElement.getAttribute('data-oxygen');

            console.log('–ü–æ–ª—É—á–µ–Ω—ã —Å—Ç—Ä–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', {
                timePointsLength: timePointsStr ? timePointsStr.length : 0,
                fireRiskLength: fireRiskStr ? fireRiskStr.length : 0
            });

            // –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º —Å—Ç—Ä–æ–∫–∏ –≤ –º–∞—Å—Å–∏–≤—ã
            const timePoints = timePointsStr ? timePointsStr.split(',').map(Number) : [];
            const fireRiskLevels = fireRiskStr ? fireRiskStr.split(',').map(Number) : [];
            const temperatureValues = temperatureStr ? temperatureStr.split(',').map(Number) : [];
            const oxygenConcentration = oxygenStr ? oxygenStr.split(',').map(Number) : [];

            console.log('–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:', {
                timePoints: timePoints.length,
                fireRiskLevels: fireRiskLevels.length,
                temperatureValues: temperatureValues.length,
                oxygenConcentration: oxygenConcentration.length
            });

            // –°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫–∏
            createCharts(timePoints, fireRiskLevels, temperatureValues, oxygenConcentration);

        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏–∑ –¥–∞–Ω–Ω—ã—Ö:', error);
            createDemoCharts(); // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ —Å–æ–∑–¥–∞–µ–º –¥–µ–º–æ-–≥—Ä–∞—Ñ–∏–∫–∏
        }
    }

    function createCharts(timePoints, fireRiskLevels, temperatureValues, oxygenConcentration) {
        console.log('–°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏');

        // –£–Ω–∏—á—Ç–æ–∂–∞–µ–º —Å—Ç–∞—Ä—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
        if (window.riskChartInstance) {
            window.riskChartInstance.destroy();
        }
        if (window.paramsChartInstance) {
            window.paramsChartInstance.destroy();
        }

        // –ì—Ä–∞—Ñ–∏–∫ –ø–æ–∂–∞—Ä–Ω–æ–≥–æ —Ä–∏—Å–∫–∞
        const riskCtx = document.getElementById('riskChart');
        if (riskCtx && fireRiskLevels && fireRiskLevels.length > 0) {
            console.log('–°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫ —Ä–∏—Å–∫–∞ —Å', fireRiskLevels.length, '—Ç–æ—á–∫–∞–º–∏');

            window.riskChartInstance = new Chart(riskCtx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: timePoints,
                    datasets: [{
                        label: '–£—Ä–æ–≤–µ–Ω—å –ø–æ–∂–∞—Ä–Ω–æ–≥–æ —Ä–∏—Å–∫–∞',
                        data: fireRiskLevels,
                        borderColor: 'rgb(255, 99, 132)',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            suggestedMin: 0,
                            suggestedMax: 1,
                            title: {
                                display: true,
                                text: '–£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            ticks: {
                                stepSize: 0.1
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '–í—Ä–µ–º—è (–º–∏–Ω)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        } else {
            console.warn('–ù–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫ —Ä–∏—Å–∫–∞: –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ canvas —ç–ª–µ–º–µ–Ω—Ç–∞');
        }

        // –ì—Ä–∞—Ñ–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
        const paramsCtx = document.getElementById('paramsChart');
        if (paramsCtx && temperatureValues && temperatureValues.length > 0 &&
            oxygenConcentration && oxygenConcentration.length > 0) {
            console.log('–°–æ–∑–¥–∞–µ–º –≥—Ä–∞—Ñ–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤');

            window.paramsChartInstance = new Chart(paramsCtx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: timePoints,
                    datasets: [{
                        label: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)',
                        data: temperatureValues,
                        borderColor: 'rgb(255, 159, 64)',
                        backgroundColor: 'rgba(255, 159, 64, 0.2)',
                        borderWidth: 2,
                        tension: 0.1,
                        yAxisID: 'y'
                    }, {
                        label: '–ö–∏—Å–ª–æ—Ä–æ–¥ (%)',
                        data: oxygenConcentration,
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.2)',
                        borderWidth: 2,
                        tension: 0.1,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '–ö–∏—Å–ª–æ—Ä–æ–¥ (%)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: '–í—Ä–µ–º—è (–º–∏–Ω)',
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: true,
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    }
                }
            });
        } else {
            console.warn('–ù–µ –º–æ–≥—É —Å–æ–∑–¥–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö');
        }
    }

    function createDemoCharts() {
        console.log('–°–æ–∑–¥–∞–µ–º –¥–µ–º–æ-–≥—Ä–∞—Ñ–∏–∫–∏');

        // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const labels = [];
        const fireRisk = [];
        const temperature = [];
        const oxygen = [];

        for (let i = 0; i < 60; i++) {
            labels.push(i);
            // –°–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            fireRisk.push(0.5 + 0.3 * Math.sin(i / 10));
            temperature.push(25 + 10 * Math.sin(i / 5));
            oxygen.push(21 - 5 * Math.sin(i / 7));
        }

        createCharts(labels, fireRisk, temperature, oxygen);
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>